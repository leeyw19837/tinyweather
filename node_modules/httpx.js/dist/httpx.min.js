/*! httpx.js v0.3.0 | httpx.min.js | The simple HTTP / RESTful requests library of JavaScript (XHR). | MIT License | By: Pandao | https://github.com/pandao/httpx.js | 2017-09-02 */
!function(e){"use strict";"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&(define.amd||define.cmd)?define(e):window.httpx=e()}(function(){"use strict";function e(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function t(e,t){if("object"==typeof t){var n=[];for(var o in t)n.push(o+"="+encodeURIComponent(t[o]));t=n.join("&")}return e=e+(e.indexOf("?")<0?""!==t&&t?"?":"":""!==t&&t?"&":"")+t,{url:e,data:t}}var n={version:"0.3.0",useXDR:!1,logPrefix:"HTTPx.js:",xhr:function(e){"undefined"==typeof e&&(e=!1);try{var t=e?new XDomainRequest:new XMLHttpRequest;return t}catch(n){return console.error(n),null}},defaults:function(e){e=e||"";var t={debug:!1,async:!0,timeout:3e3,method:"GET",url:"",data:"",dataType:"text",headers:{},contentType:"text/plain; charset=UTF-8",jsonp:"callback",success:function(){},error:function(e,t){console.error("HTTP Request Error: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Unkown Error / Timeout")+")")},ontimeout:function(e,t){console.error("HTTP Request Timeout: ",e,t,this.status+" ("+(this.statusText?this.statusText:"Timeout")+")")}};return""!==e&&"string"==typeof e?t[e]:t},needUseXDomainRequest:function(e){var t=!1;return/^((http:|https:)?\/\/)/.test(e)&&location.hostname.indexOf(e)<0&&window.XDomainRequest&&(t=!0),t},request:function(n){n=n||{};var o=e(this.defaults(),n);o.method=o.method.toUpperCase();var r=!1,s=o.url,a=o.data,i=o.method,u=t(s,a);if(o.debug&&console.log(this.logPrefix+" settings =>",o),a=u.data,"GET"===i&&(s=u.url),this.needUseXDomainRequest(s)&&(r=!0,o.debug&&(console.warn(this.logPrefix+" Cross domain request using XDomainRequest."),console.warn(location.hostname+" => "+s)),!window.addEventListener&&!/MSIE 8\.0/.test(navigator.userAgent)))return console.error(this.logPrefix+" Your browser can'nt support cross domain request => "+s+"."),!1;var c=this.xhr(r);if(!c)return!1;var d=function(){var e;switch(o.dataType){case"json":e=JSON.parse(c.responseText);break;case"xml":e=c.responseXML;break;default:e=c.responseText}o.success.bind(c)(e)},f=function(e){4===c.readyState&&(200===c.status||304===c.status?d():o.error.bind(c)(i,s,e))};r?(c.onload=d,c.onerror=function(e){o.error.bind(c)(i,s,e)},c.ontimeout=function(e){o.ontimeout.bind(c)(i,s,e)},"GET"!==i&&"OPTIONS"!==i?i="POST":"OPTIONS"===i&&(i="GET")):(c.addEventListener("readystatechange",f),c.addEventListener("error",function(e){o.error.bind(c)(i,s,e)}),c.addEventListener("timeout",function(e){o.ontimeout.bind(c)(i,s,e)})),c.open(i,s,o.async);var p=o.contentType;if(!r){"GET"!==i&&(p="application/x-www-form-urlencoded"),c.setRequestHeader("Content-type",p);for(var l in o.headers)c.setRequestHeader(l,o.headers[l])}c.$request={url:s,method:i,dataType:o.dataType,contentType:p,headers:o.headers},c.$url=s,c.$method=i,c.$dataType=o.dataType,c.timeout=o.timeout,c.send(a)},exec:function(t,n,o,r,s,a){o=o||{},r=r||function(){},s=s||this.defaults("error"),a=a||{},"function"==typeof o&&(s=r,r=o,o="");var i={url:n,method:t,data:o,success:r,error:s};"object"==typeof n&&(a=n,a.method=t),this.request(e(i,a))},get:function(e,t,n,o,r){this.exec("GET",e,t,n,o,r)},post:function(e,t,n,o,r){this.exec("POST",e,t,n,o,r)},put:function(e,t,n,o,r){this.exec("PUT",e,t,n,o,r)},patch:function(e,t,n,o,r){this.exec("PATCH",e,t,n,o,r)},"delete":function(e,t,n,o,r){this.exec("DELETE",e,t,n,o,r)},json:function(t,n,o,r,s){n=n||{},o=o||function(){},r=r||this.defaults("error"),s=s||{},"function"==typeof n&&(r=o,o=n,n="");var a={url:t,dataType:"json",method:"GET",data:n,success:o,error:r};"object"==typeof t&&(s=t,s.method="GET",s.dataType="json"),this.request(e(a,s))},getJSON:function(e,t,n,o,r){this.json(e,t,n,o,r)},jsonp:function(e,n,o,r){r=r||"callback","function"==typeof n&&(r=o,o=n,n="");var s=t(e,n);e=s.url,n=s.data;var a="__jsonp_"+r+(new Date).getTime()+"_"+Math.floor(1e5*Math.random())+"__";e+=(e.indexOf("?")<0?"?":"&")+r+"="+a;var i=function(t){return function(n){if("string"==typeof n)try{n=JSON.parse(n)}catch(o){}n=n||{},t(n,e),window[a]=null,document.body.removeChild(document.getElementById(a))}};window[a]=i(o);var u=document.createElement("script");u.src=e,u.async=!0,u.id=a,document.body.appendChild(u)},getScript:function(e,t){if(""===e)return void console.error("Error: Get script source can't be empty");t=t||function(){};var n=document.getElementsByTagName("head")[0],o=document.querySelectorAll('script[src="'+e+'"]');o.length>0&&n.removeChild(o[0]);var r=document.createElement("script");r.type="text/javascript",r.onload=r.onreadystatechange=function(){r.readyState&&!/loaded|complete/.test(r.readyState)||(r.onload=r.onreadystatechange=null,r=void 0,t())},r.src=e,r.async=!0,n.appendChild(r)}};return n});